<!DOCTYPE html>
<html>
<link rel="stylesheet" type="text/css" href="style.css"></link>

<button id = "next">next</button>
<button id = "myBtn">Settings</button>
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h1>Settings </h1>
    <div id = "rsconfig">
        <table id = "settings-table">
            <th>RS</th>
            <th>Count</th>
            <th>Delay</th>
        </table>
        <button id = "settings-save">Save</button>
    </div>
  </div>

</div>

<script type="text/javascript">
var config, reset = false;
let tbl = document.getElementById ("settings-table");
let RSs = ['add', 'mult', 'div'];
for (let rs of RSs) {
    let row = document.createElement ('tr');

    let col = document.createElement ('td');
    col.innerHTML = rs;
    row.appendChild (col);

    // count
    col = document.createElement ('td');
    col.innerHTML = `<input id=${rs+'_count'} value="2"></input>`;
    row.appendChild (col);

    // latency
    col = document.createElement ('td');
    col.innerHTML = `<input id=${rs+'_latency'} value="2"></input>`;
    row.appendChild (col);

    tbl.appendChild (row);
}

var modal = document.getElementById("myModal");
var btn = document.getElementById("myBtn");
var span = document.getElementsByClassName("close")[0];
btn.onclick = function() {
  modal.style.display = "block";
}
span.onclick = function() {
  modal.style.display = "none";
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
btn = document.getElementById ("settings-save");
btn.onclick = function () {
    config =  {

    }
    let tbl = document.getElementById ('settings-table');
    config['rs_config'] = {};
    config['fu_config'] = {};
    for (let rs of RSs) {
        config['rs_config'][rs] = {
            count : document.getElementById (`${rs}_count`).value
        }
        config['fu_config'][rs] = {
            count : document.getElementById (`${rs}_count`).value,
            delay : document.getElementById (`${rs}_latency`).value,
        }
    }
    reset = true;
}
btn.click ();
</script>

<div id = "simulation-area">
    <div id = "right-col">
        <div id = "RegisterFile" style = "float:right">RegisterFile</div>
        <div id = "ROB" style = "float:right">ROB</div>
    </div>

    <div id = "rs" style = "float:bottom">RS</div>
    <div id = "function-units" style = "float:bottom">FunctionalUnits</div>
</div>

<script type = "text/javascript" src = "js/render.js"></script>
<script type = "text/javascript" src = "js/Table.js"></script>
<script type = "text/javascript" src = "js/core/CDB.js"> </script>
<script type = "text/javascript" src = "js/core/RAT.js"> </script>
<script type = "text/javascript" src = "js/core/ROB.js"> </script>
<script type = "text/javascript" src = "js/core/RS.js"> </script>
<script type = "text/javascript" src = "js/core/RegisterFile.js"> </script>
<script type = "text/javascript" src = "js/core/Chip.js"> </script>
<script type = "text/javascript" src = "js/core/FunctionalUnit.js"> </script>
<script type = "text/javascript" src = "js/core/IssueUnit.js"> </script>
<script type = "text/javascript" src = "js/app.js"> </script>

</html>
